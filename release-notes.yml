highlights:
  - Zephyr tree from 1.10 release candidate, with CMake
  - MCUBoot and FOTA sample build systems ported to CMake

summary: |
 This is the first Zephyr microPlatform update which uses the new CMake
 build system, which has replaced the use of Kbuild.

 As described in the summary from https://foundries.io/mp/zmp/0.2, all
 users will need to update any out of tree application build systems.

parts:
  - name: Zephyr microPlatform
    summary: |
      Tree based on the Zehpyr 1.10 release candidate 2, with
      additional out of tree patches to support a CMake-based ZMP.
    projects:
      - name: MCUBoot
        manifest_project: mcuboot
        features:
          - heading: CMake-based build system
            summary: |
              The Zephyr build system was rewritten to use cmake
              instead of Kbuild, following the equivalent upstream
              change.
        bug_fixes:
          - heading: Fix jump to invalid target when not validating slot 0
            summary: |
              A bug fix to the core bootloader was merged which
              affects configurations that do not validate slot 0
              before booting into it. In these configurations, the
              bootloader would jump to any flash, regardless of if the
              mcuboot header contained a valid magic number.
          - heading: Build fix for Zephyr with ECSDA
            summary: |
              A bug fix to Zephyr targets was merged which restores
              the build when using ECDSA (rather than the default
              RSA).
      - name: Zephyr
        manifest_project: zephyr
        features:
          - heading: New build system
            summary: |
              "The most significant change facing application
              developers is a complete rewrite of the build system to
              use CMake instead of the Makefile-based Kbuild system
              borrowed from the Linux kernel. All applications will
              need to rewrite their build systems to adapt;
              instructions are available in the Zephyr Application
              Development Primer, available in the Zephyr
              documentation:

              http://docs.zephyrproject.org/application/application.html"
          - heading: Wide-ranging Bluetooth Mesh improvements
            summary: |
              Over a hundred patches, fixes, documentation, release
              notes, and other improvements to Bluetooth Mesh were
              merged.
          - heading: NXP i.MX support
            summary: |
              Support for the NXP i.MX SoC family was merged, along
              with board support for a new target, mimxrt1050_evk.
          - heading: Device tree comes to x86...
            summary: |
              X86 devices based on QUARK_X1000 gained device tree
              support. The galileo board has a devicetree defined
              which can be used as an example when starting to use DT
              on x86.
          - heading: ...and to ARC
            summary: |
              Among Device tree support was added for ARC devices, as
              well as minnowboard, atom based devices,
              arduino_101_sss, quark_se_c1000_ss_devboard.
          - heading: Network loopback devices
            summary: |
              Loopback device support was merged in the networking
              subsystem.
          - heading: Additional format specifiers for printk()
            summary: |
              The printk() function now supports string format
              specifiers.
          - heading: TinyCrypt update
            summary: |
              TinyCrypt was updated to 0.2.8.
          - heading: New Atmel SAM drivers
            summary: |
              New drivers were added for Atmel SAM I2S and DMA
              (XDMAC).
          - heading: Particulate matter sensor support
            summary: |
              Sensor channels for particulate matter were added, and a
              driver for the plantower PMS7003 sensor was merged.
          - heading: User buffer validation support for ARM
            summary: |
              Support for validating user buffers when
              CONFIG_USERSPACE=y was merged for the ARM architecture.
          - heading: Userspace protection tests
            summary: |
              Tests for userspace protection were merged.
          - heading: STM32L476G Discovery
            summary: |
              Board support was added for STM32L476G Discovery.
          - heading: OpenOCD improvements to STM32 targets
            summary: |
              openocd support was added for nucleo_l476rg and
              stm32l496g_disco.
          - heading: PWM2 for stm32f4_disco
            summary: |
              PWM2 support was added for stm32f4_disco.
          - heading: Additional em-starterkit configurations
            summary: |
              EM11D and EM7D configurations were added for
              em-starterkit.
          - heading: Altera HAL support
            summary: |
              External library support was added for the Altera
              Hardware Abstraction Library (HAL).
          - heading: Altera soft IP serial and timers
            summary: |
              New drivers were merged for Altera soft IP serial ports
              and timers.
          - heading: Additional mcux targets
            summary: |
              Driver support was added using the mcux driver for
              mimxrt1051 and mimxrt1052 devices.
          - heading: Entropy for nRF5
            summary: |
              An entropy device driver was merged for nRF5 targets.
          - heading: Ethernet over USB documentation
            summary: |
              Documentation was added for Ethernet over USB.
          - heading: More tests converted to ztest
            summary: |
              The push to convert to the ztest framework continues.
        bug_fixes:
          - heading: ARM fix for crashes setting up new threads
            summary: |
              A bug fix for ARM which prevents crashes when setting up
              new threads was merged.
          - heading: Build fixes for x86_jailhouse and nucleo_f091rc
            summary: |
              Build breaks for the x86_jailhouse and nucleo_f091rc
              boards were fixed.
          - heading: Kconfig cleanups
            summary: |
              Some Kconfig dependencies and definitions were fixed and
              cleaned up.
          - heading: STM32 I2C and USB fixes
            summary: |
              Bugs affecting STM32 I2C v2 and USB were fixed.
          - heading: Net fixes
            summary: |
              A few bug fixes for struct net_pkt were merged,
              correcting the data length appended by net_pkt_append(),
              fixing accounting for IP header lengths, and avoiding a
              possible division by zero. The MTU is now honored when
              TLS and DTLS are used, among other MTU-related fixes.
              Network contexts are unlocked in case of error,
              resolving possible deadlock issues. Sockets now support
              IPv6 wildcard and loopback addresses. A net packet leak
              in the socket layer was fixed. Several LWM2M fixes were
              merged, both to the engine core and to the temperature
              IPSO object. Several fixes were merged to the new HTTP
              library, which is the subject of ongoing discussion on
              the mailing list.
          - heading: Fixes to 802.15.4 L2 core
            summary: |
              A few fixes and improvements to the core 802.15.4
              implementation were merged.
          - heading: 802.15.4 on kw41z fixes
            summary: |
              Various fixes for 802.15.4 on kw41z were merged.
          - heading: PWM on nRF5 fixes
            summary: |
              Fixes were merged for PWM on nRF5 targets
          - heading: GPIO on ESP32 fixes
            summary: |
              Fixes were merged for GPIO on esp32.
          - heading: DesignWare USB fixes
            summary: |
              Fixes were merged for the DesignWare USB IP block driver.
          - heading: Miscellaneous kernel fixes
            summary: |
              Miscellaneous minor improvements and cleanups were made
              in the core kernel.
          - heading: Shell subsystem fixes
            summary: |
              The shell subsystem received numerous updates, fixes,
              and cleanups.
      - name: Zephyr FOTA Samples
        manifest_project: zephyr-fota-samples
        features:
          - heading: Port to CMake
            summary: |
              The application build systems were converted to CMake.
          - heading: dm-hawkbit-mqtt uses mgmt.foundries.io for hawkBit
            summary: |
              The dm-hawkbit-mqtt sample now uses mgmt.foundries.io as
              its hawkBit host. This is not a public host managed by
              Open Source Foundries; instead, it is an unused host
              that needs to be configured in the local network for the
              sample to work properly. This can be done via hosts
              configuration on a gateway device.
        bug_fixes:
          - heading: Fix Bluetooth MAC address for Linux 4.12 and later
            summary: |
              Bluetooth communication from Zephyr with stacks on
              Linux kernels newer than 4.11 require the removal of
              CONFIG_NET_L2_BT_ZEP1656 due to several bugs being
              fixed in Linux.

              One of these changes stops toggling the U/L bit of the
              BT MAC address as a signifier for a public or random
              address. Due to this change, the FOTA samples adjust
              the fifth octet of the address to work correctly when
              CONFIG_NET_L2_BT_ZEP1656 is disabled.

              This fixes communication problems with several nodes
              connected via 6lowpan on recent Linux kernels.
